# 答读者问16 | 如何平衡计算机的“内存空间”和“运算时间”？

> 读者@春回大地
> 
> 谷歌给网页建索引是由电脑自动完成的吗？这么大的信息量单靠人工感觉不现实，如果靠电脑，那它怎么知道哪些是关键词呢？

> 吴军

这个问题涉及到一个技术问题和一个思维方式的问题。

先说技术问题，简单的回答是， **Google建索引当然是自动的，而且必须是自动的。** 第二，Google建索引是对所有词建立索引，包括看上去没有用的“的、地、得”，“着、了、过”。在早期，只有Google这样做，今天bing也做到了这一点。但是，国内有些搜索引擎为了省钱，并没有这么做。

接下来就要讲一个思维方式的问题了。 **Google所信奉的哲学是，相信机器，相信算法，相信自动化做事最终可以比人工做得好。** 你如果深入了解一下它的商业逻辑，都是本着这样一个原则。

那么，是否有可能当遇到机器，或者算法的漏洞时，应该由人参与一下更好呢？大部分情况确实如此，但是如果在文化上留出了让人参与的缺口，以后遇到技术难题就不可避免地要回避，这样就难以进步了。因此，Google一般不留这样人工修补的口子，而是一条道走到黑。 **如果技术不够好，有漏洞，就开发更好的技术，弥补技术本身的不足，而不是让人来弥补不足。**

Google无人驾驶汽车，从0走到99%，只花了六年时间，即2004~2010年。但是从99%走到99.99%，又花了6年时间，即到2016年。如果让人完成最后1%，效率一定更高，但这不是它的文化。

Google这种企业文化好不好呢？不好评论，但这确实是一种文化，而且是和中国人的文化完全不同的另一种。中国人比较讲究中庸，喜欢“既要这样，也要那样”“具体问题具体分析”等逻辑。西方人受到真正意义上的宗教的影响比较大，比较执着，一条道走到黑，说得难听点是比较傻，不懂得通融。他们一旦相信技术，就不会用人去修补，而是要用技术修补技术。你从埃隆·马斯克的做事风格上也能体会这一点。这是一种和我们不同的思维方式，另一种哲学，另一种文化。

 **多元文化的重要性就在于，知道世界上有和我们不一样的想法，给我们一个全新的考虑问题的思路。** 如果周围都是中国人，自然会觉得我们这种想法完全没有问题。

> 读者@板牙老爹
> 
> 本周文中提及一个细节，“Google把在网络上所有能找到的文档（以及图片、视频等内容）下载以后，会对每一个词建立索引，记录下来每一个词都出现在哪一篇文档（网页）中的哪一些具体的位置”。
> 
> 那么问题来了：1.Google所做的基础工作量非常大，它是如何做到的？2.真的要将所有的文档（以及图片、视频等内容）都下载下来吗？是下载到本地吗？如果是这样的话，对硬件的要求确实是无法想象的。

> 吴军

首先要说，Google真的是保存一切，索引一切，它们在Google的数据中心中还不止一个拷贝。而且我在2012~2014年领导Google机器问答项目时，我们会分析互联网上能找到的全部英语句子，我知道这个量是巨大的，以至于对很多人来讲难以置信。

我们这门课的目的， **就是要给大家展示一个新的世界，一个巨大的世界，它超出我们很多人的想象。** 我们大部分人的思维是有局限性的，因为我们作为生物人，脑子中装的东西太有限，这就有些像我在专栏一开始说的，非洲酋长说不过“3”一样。我们认为很大、做不到的事情，但是对Google这样的公司来讲根本不是问题，这就是认识上的差异。

如果你觉得上述事情对硬件的要求无法想象，说明两点：

 **1. 我们周围的环境局限了我们的见识。**

 **2. 没有真正理解摩尔定律，对指数增长依然没有感觉。** 摩尔定律让今天计算的能力比10年前大了100倍。

我为什么一直推荐大家（包括各位家里10岁左右的孩子）读《从一到无穷大》呢？因为我当时读了很震撼，看到里面讲的印度国际象棋的棋盘放稻谷的例子，看到梵塔问题（这个以后我会讲），我当时对指数增长感到震撼，超出我的想象力，甚至认为书上讲错了。

最后顺带讲讲投资，今天很多人依然感觉不到每年7%的复合增长是一个多快的增长。没有理解这一点，就没有理解指数增长。 **在当今，什么是最重要的见识？就是真正理解了摩尔定律，理解了指数增长，这就是有见识。** “得到”的很多老师，包括罗胖总是讲，要成为时间的朋友，就是对指数增长的体会，对见识的体会。

> 读者@Aspirin
> 
> 在平时工作的时候，总觉得内存空间和运算时间是一对冤家，就是利用缓存机制，以牺牲内存换取时间，跟您在《谷歌方法论》中说的计算机的思维模式不谋而合。
> 
> 但在工程和学术中对待内存和时间却又有些许的不同，这个度怎么把握比较合适？

> 吴军

时间和空间确实不可兼得，如果理解相对论，就会发现时间和空间是一回事，更能理解它们不可兼得的原因了。

具体到计算机科学领域，解决内存空间和计算时间的矛盾，用“把握度”这种说法原则上是正确的。但是，光有这么一个原则还是远远不够的，需要有几个具体的做事方法或者说手段来解决实际应用中的矛盾。通常采用的方法包括：

 *1. 遇到具体问题时，要搞清楚目前的主要矛盾是什么。* 如果必须要求高速度，实时处理，比如股票交易时的一些场景，就需要以空间换时间了，很多计算都要事先完成，而不能临时再计算。如果需要低成本，考虑的侧重点就完全不同了。

 *2. 看成本，做对比，决定哪个更重要，提高整体性价比。* 比如设计一款手机，你的预算是有限的，内存一共就那么多，就要平衡一下，是要做的事情少一点，每件事让它能够完成得顺畅些，还是提供的功能多一些，让用户等一等。

 *3. 有时空间和时间并非完全矛盾，一个问题解决了，相应的另一个问题就不再是问题。* 相反，一个地方成了瓶颈，另一个问题也无法解决。比如今天给你200美元，你可以将一台Mac Pro的CPU速度增加30%，也可以把这个钱用于将内存空间增加100%（8G增加到16G），你该怎么做呢？

很多人想，我运行不了几个程序，不需要增加空间。这看上去有道理，其实是不对的，因为增加了30%的CPU速度，再运行个别大程序时，由于内存成了瓶颈，处理器要不断地拿时间来换空间，来回来去折腾，浪费掉的时间远比30%多，CPU的提升效果完全看不出来。有经验的计算机从业者，都知道这钱应该花在扩充内存上， **因为有了内存，减少了不同程序切换时的边际成本，会使得计算机的运行顺畅很多，会觉得计算机快了很多。**

> 读者@腾飞
> 
> 任何一个索引，都需要一个编码分类的过程，这个前期工作的量有减少的可能吗?
> 
> 另外，如何让前期工作能够发挥最大效率，有普适性呢？

> 吴军

“任何一个索引，都需要一个编码分类的过程”这个说法并不正确，索引可以按照任何数据形式进行，并不需要编码分类。索引甚至就是为了取代分类的。

索引本身无论是在计算机科学中，还是在日常工作中，都是一个具有普适性的做法。

> 读者@一库
> 
> 老师可不可以说一说YouTube，为什么最成功的视频网站挣不到钱？为什么会被评为失败？

> 吴军

首先要说明的是， **认为YouTube失败，是一部分媒体的看法，不是所有人的看法。而认为它失败的人，主要是从经济收入的角度来考量。**

至于为什么YouTube难以盈利，主要是成本太高，它占了Google整个互联网服务绝大部分的成本。YouTube和视频网站奈飞（Netflix）大约占了全球互联网流量的4/7，你可以想象成本有多高。

另外，Google秉承不作恶的原则，给了YouTube的用户一个选择，广告5秒之后，就可以点击跳过广告，因此它的广告费并不高，不像国内很多网站，强迫用户看60秒甚至更长的广告。因此YouTube的广告收入并不高。

从YouTube不挣钱也可以看出， **视频网站要想盈利其实很难，** 从这里也可以判断对于一些视频网站的公司公布的财报是否有水分，它们是否值得投资。

> 读者@宙
> 
> 吴军老师，你常说碰见不好的领导，马上就可以转身走人。但实际上，除非你比领导见识更广、能力更强，领导的水平是否差，恐怕很难判断。吴老师有什么判断领导的建议吗？

> 吴军

还有一位读者问：如何评价一个老板是否靠谱，如何让自己也能成为优秀的领导。

对领导有基本判断还是不难的，如果这一点都做不到，说明大学时的生活没有过好。一个补救方法就是读读去年的《硅谷来信》、熊太行老师的《关系攻略》和刘润老师的《5分钟商学院》。希望对你有帮助。

![https://piccdn3.umiwi.com/img/201803/16/201803162340474960191519.png](https://piccdn3.umiwi.com/img/201803/16/201803162340474960191519.png)

![https://piccdn3.umiwi.com/img/201803/16/201803162341159879169971.png](https://piccdn3.umiwi.com/img/201803/16/201803162341159879169971.png)

![https://piccdn3.umiwi.com/img/201803/16/201803162341313867541526.png](https://piccdn3.umiwi.com/img/201803/16/201803162341313867541526.png)

---
