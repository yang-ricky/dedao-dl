# 答读者问20 | 计算机数据结构的出现与计算机本身的关系

> 读者@Jack
> 
> 吴老师，这些数据结构之所以这么来设计，除了可以抽象出很多事物的共性以外，是不是还因为更适合机器的处理方式呢？

> 吴军

这个问题问得很好！对这个问题简单的回答是肯定的，即 *数据结构的出现和计算机本身工作的方式有关。* 今天演化出来的很多数据结构，甚至和图灵机的原理，以及计算机底层的冯·诺依曼结构也有关。比如链表这种数据结构，就和图灵机的设计直接相关。

 *世界上很多抽象化的结果，都和我们人容易掌握的工具有关。* 比如我们将大部分零件做成圆形的，或者有圆形的切割和开口，主要是因为圆形好加工。我过去做过金属工艺的加工，非常能体会使用机械（比如车床）切出一个圆的东西是很容易的事情，但是要切出一个方的是极为费劲的。

因此，谁要是在机械设计时搞了一堆方的设计，会被认为缺乏基本的机械设计素养。如果你到制造业的工厂去看看，基本上就只有两种运动，直线运动和圆周运动，其它所有的运动都是它们的组合（而且用得并不多）。这并不是说世界上只有这两种运动，但是将运动抽象成这两种，就容易在机械中实现了。

> 读者@mingle
> 
> 我并非科班出身，出于兴趣曾完整看过一遍算法导论，当然理解得并非很深入，请问，哈希表在一定程度上是否兼有数组和链表的优点呢？

> 吴军

这个问题问得很好！这个问题有点专业化，我尽可能简单地做一下解答。

 **首先还是要说明，世界是没有只有优点没有缺点的东西，** 就如同没有只有正面没有反面的纸张一样，哈希表不可能只有数组和链表的优点而没有缺点。

其次，数组、链表和哈希表是三个不同的东西，它们有一些相关性，但是使用的目的有区别。

 *数组是为了便于直接查找访问，* 它要求数据项基本上是整齐的，比如大家的姓名长度都差不多，格式都是一串汉字或者英文字母。 *链表强调的是前后的依赖关系，* 一个连着一个，比如某个学位选课的次序，一门课和它的先修课就是这种链接关系，只有先完成了先修课，才能选下一门课。课程的一二三四五编号，倒并不重要。

 *哈希表的本质是通过随机化，把一个比较大的、稀疏的空间，映射到一个比较小的、紧密的空间中。* 在计算机中，它通常是通过数组实现的。相比一般的数组，它有三个优点：

1. 动态增加或者删除一个数据项比较快。

2. 数组只能根据下标直接查找，下标和数据内容无关，如果要根据内容查找，效率就比较低，哈希表的下标是根据数据内容计算出来的，因此根据内容查找比较快。

3. 数组在处理多个维度时变得很复杂，哈希表可以将多个维度的数据映射到一个维度。

但是， **哈希表是需要额外成本的，它其实是以空间换时间。** 其次，数组可以一次顺序存取很多项数据，而哈希表存取数据只能一个个进行。

> 读者@波波脑湿
> 
> 计算机的数据储存要有结构，我们人脑记忆知识也需要结构化记忆吗？我们常说的结构化记忆跟计算机的链式数据有相通之处吗？

> 吴军

人脑本身的记忆很难刻意把它结构化，因为人脑是怎样记忆的至今还没有搞得很清楚，认知科学家和脑科学家目前所掌握的人脑知识可能连人脑认知的1%都不到。但是，我们人可以设计出帮助我们记忆，以及提醒我们记忆的工具。所谓的结构化记忆就是这样一种工具。

结构化记忆和计算机的链表没有多大关系，倒是和计算机的数据库存储方法有关系。关于数据库我以后还会专门介绍，这里讲它在存储和查找数据上的两个要点：

 *1. 它把我们现实生活中很具体的、结构并不是很清晰的数据抽象成结构化的。* 比如在单位里我们每一个人的人事记录，在现实状态下不可能相同。有的人因为在单位时间长，内容多一些，有的人少一点；有的人比别人多一些选项，比如得过很多奖，有的人记录很不完整。当然使用计算机进行人事管理，就需要有相对统一的格式，从大家的共性中抽象化出一些具体的结构就很重要。比如大家都有姓名、性别、年龄，以及按照时间次序组织起来的工作经历等等。

 *2. 抽象化的过程要超脱数据原来物理式的结构。* 比如原来的档案是一个人一个口袋，各种数据胡子连着眉毛放在一起，在计算机中这样存放就难以查找使用，因此需要根据共同的数据变成一个个方便查找使用的表格，比如人的姓名、出生年月、性别等简单信息是一个表，人的履历是另一个表，单位里某项任务和人的关系是第三个表格。这些抽象出来的表格，和真实世界就有差距了，它们被设计出来的目的是为了便于管理，也便于计算机处理。

结构化的数据通常和链表没有什么关系，倒反而容易用数组来存储。一般来讲，格式固定，数据项大小固定的数据，改动较小的数据，采用数组存储比较好。格式不固定，经常变动的数据，采用链表存储方便些。

> 读者@周兆基
> 
> 计算机程序也有一个数据类型的概念，那它跟数据结构的区别是什么？和数据结构又有什么联系？

> 吴军

这是一个太具体的问题，为了方便非计算机专业的读者理解，我这样打比方。

比如盖房子，需要各种预制件，它们就是数据结构。但是你使用的钢筋有尺寸和标号的差别，比如10米长，1/2英寸粗，高碳钢的钢筋，或者5米长，1/4英寸粗，普通钢的钢筋。

这就相当于计算机的数据类型，一个数字可以是32位有正负之分的整数，64位有正负之分的整数，32位没有正负之分的整数，或者64位的浮点数，即数学上所说的实数或者小数。这些就相当于是不同编号的钢筋。在建筑中，做一个横梁可能需要使用前一种钢筋，做楼梯的隔板需要使用后一种钢筋。

类似地，在计算机中，设计大学里学生的学号，使用32位的无符号整数就可以了，因为学号不会是负数，也不会上亿，而设计我们的身份证号，使用32位二进制就不够了，需要使用64位。

> 读者@春哥呦吼
> 
> 作为二叉树的变种，哈夫曼树和红黑树是不是在查询或者写入效率上做了优化呢？如何更有效地优化二叉树在大数据量下的读写性能呢？

> 吴军

这个问题太过专业化，我简单回答如下。

1. 哈夫曼树主要是对应于哈夫曼编码，即信息论里的最短编码。这样可以保证平均的访问时间最短。当然，哈夫曼编码的条件是必须事先知道每个码出现的频率。

2. 红黑树主要是为了防止二叉树一个枝子太长，另一个太短。比如一边50层，另一边三层，这样效率就不高了。使用红黑树，可以保证各个枝子的长度基本相等。当然，代价是需要不断维持平衡。

它们的目的不同。

![https://piccdn3.umiwi.com/img/201804/13/201804131748543807589534.jpg](https://piccdn3.umiwi.com/img/201804/13/201804131748543807589534.jpg)

---
