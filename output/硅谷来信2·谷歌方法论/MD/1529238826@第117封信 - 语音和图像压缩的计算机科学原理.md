# 第117封信 | 语音和图像压缩有哪些计算机原理？

这一周我们介绍计算机科学的一些原理，这些内容虽然可能有点专业化，但是我会讲解得比较简单，因此大家不要有顾虑。

我们还是从几道Google的面试题入手，每一道题会引出背后的一个原理。今天我们要讲的面试题是倒置英语句子，这也是我在面试Google时被考到的一个问题。

问题是这么说的：

 **给你一个英语的语句，比如"London bridge is falling down"，把它完全倒装过来，"down falling is bridge London"，如何不使用额外的存储空间完成这个倒装过程？**

通常学习计算机算法的人在解决这个问题时，首先会想到把这个句子切割成一个个单词，然后把它们存到一个数组里，数组的结构大致如下：

![https://piccdn3.umiwi.com/img/201806/18/201806181611295744009309.png](https://piccdn3.umiwi.com/img/201806/18/201806181611295744009309.png)

把这个数组顺序存入，逆序取出来就可以完成语句倒装的问题。当然，还有一个类似的办法，就是把上面的单词，一个个送入堆栈，如果你还记得我写给你的第98封信中，介绍堆栈的先进后出，后进先出性质时，就可以利用这个数据结构完成句子的倒装。

但是，这种算法要额外地使用存储空间，因此不符合题目的要求。在面试时，我们一般会让选择了上述方法的候选人把他们的想法说完，这样至少让他们在心理上不至于感受到打击，但是接下来我们会要求他们找出不使用额外内存空间的方法。

很多人想到的是把上面句子中的单词前后对调。但 **这道题目的难点恰恰在于英语单词的长度不同，如果不使用额外的空间，很难把不同长度的单词对调。**

学习计算机的人会想到记录下来句子一头一尾两个单词的长度，然后把长的那个单词先挪开，短的那个填进长的单词空出来的位置。

比如在上面的例子中，London这个词比较长，down这个词比较短，可以把London先挪出来，把down这个词放到London的位置中，这是放得下的。但是这样接下来的问题又来了，长的单词London无法填入短的单词down留出来的空位。

当然，有人会想，在短的单词那边再挪走一个词，具体到上面的例子中，就是挪走falling，看看能否把长的单词安置进去。在这个例子中是可以的。当然，实际情况可能会比这个复杂，有可能留出的空间还不够，比如of the 这两个单词的长度加起来也没有Chinese一个长。即便句子尾巴上两个单词的位置能够放头上的一个长的单词，但也有可能挪出的空间太多了，这样句子的头上放不下两个单词，上面的例子就陷入了后一种情况。

我讲到这里，你可能已经糊涂了，这其实就对了，因为我也没有打算让你听懂，我啰哩啰嗦地讲了这么多，无非是想说，前后对调单词这件事远比我们想象的复杂得多， **以至于这个看似合理的想法在计算机中几乎无法实现。**

在我考察Google候选人中，我大约向十几个候选人问了这个问题，大约一半的人（10人左右）试图采用头尾单词对调的方法，但是这10个人没有一个人能够写出实现他们想法的程序，因为他们都走进了死胡同。

上面这种方法的问题在哪里呢？其实 *最大的问题在于人会陷入自己固有的思维方式，或者说常人的思维。* 这道题目中，我们要求以单词为单元进行倒装，单词本身必须维持原状，因此大家为了满足这一点要求，不敢把单词打碎，搞乱。而用计算机解决这个问题的关键，又恰恰是要把单词先搞乱，再规整起来。这道题最好的解法其实非常简单，如果你已经想到了，恭喜你，如果还没有，不妨花一分钟听我讲一下，其实只需要捅破一层窗户纸。

 **第一步，先将整个句子看成是一个完整的字符串，以字母为单位头尾对调，** 这样上面的句子就变成了下面这样一个乱七八糟的字符串：

“nwod gnillaf si egdirb nodnoL”

上面这一串字，你可能根本看不懂，但是没有关系。接下来我们再完成第二步，你就看清楚了。

 **第二步，把用空格分割的每一个字串以字母为单位，头尾对调。** 比如第一个字串是nwod，头尾对调后是down，也就是原来句子中的最后一个单词。第二个字串是gnillaf，字母头尾对调后是falling，原来句子中倒数第二个单词。这样一个个地做，直到最后一个字串里的字母对调完毕。这样就得到了下面的倒装句子：

“down falling is bridge London.”

这个方法为什么能成功呢？

这个方法看起来十分简单，但是有趣的是，面试Google的人有一半做不出这道题，要知道能够到Google公司面试的，十份简历也未必能挑出一两个人，并非等闲之辈。但是，囿于平时的思维定式，特别是不敢把整个句子变成无意义的字串， **很多人想不到先要把整个句子变得无意义，才能得到的后面有意义的单词。**

第一步，将有意义的单词变成无意义的字串，看似把问题搞乱了，但其实完成了两件事，一个是把文字信息置换了位置，另一个是记录了每一个单词的长度，保留了下来，这就避免了那种试图将整个单词搬家的算法，很难搞清楚每个单词长度的缺陷。这种方法能够工作，很重要的一个原因是， *它的每一步操作，其实都保证了信息不丢失，* 虽然那些处于中间状态的信息你未必看得懂。

 **这种先把看得懂的信息，变成你看不懂，但是没有任何损失的中间信息的做法，是今天语音和图像处理的基础。** 如果我们把人的语音录下来，显示在屏幕上，它是一段声波的波形，虽然你看不出它是什么音，但是至少能看出波动；对于图像，则更加直观了，一张风景画就是风景画，一张肖像就是肖像。

但是，如果我要说，能否将语音和图像压缩一下，你就犯难了，因为你无论是把平滑的语音抽掉一些样点，或者把图像去掉一些像素，语音的清晰度，或者图像的分辨率都损失很大。那么在语音和图像压缩中，科学家们是怎么设计算法的呢？这就和上述算法有相似之处了。

 **第一步，先把语音或者图像从直观的信号，变成人根本看不懂的频率信号。**

 **第二步，根据压缩的比例，把高频的信号过滤掉，只保留低频的即可。** 当播放语音，或者显示图片时，再从频率信号恢复为语音波形，或者图像即可。

你如果有摄影经验，可能能体会原图像文件Raw File，和压缩的JPEG文件的细微差别。简单地讲，原图是一个像素一个像素存储的，而JPEG文件其实存储的是图像的频率，你可以认为是一大片一大片存储的，因此像蓝天、白云、大海这样变化不是很多的色块，压缩的JPEG文件基本上把它们变成一种颜色了。通常JPEG文件压缩10倍，你肉眼看不出什么区别。类似地，语音压缩十倍，你基本上也听不出区别。

我们从Google的一道面试题，讲到语音和图像的压缩。它们的共同点在于， **计算机在处理信息时，通常要把信息变成另一种形式才好处理，而那种形式，并非是人所熟悉的。** 因此，搞计算机和信息处理，一定要走出人日常的认知。

最后，留一下今天的思考题。一共两道，第一道就是把今天的面试题搞懂，第二道是 **找一个生活中的例子，直观的解决方法不管用，要先把问题变成一个看似更复杂的问题，然后再解决它。**

你可以把这封来信分享给你的朋友，一起讨论今天的思考题。

![https://piccdn3.umiwi.com/img/201806/17/201806172034345354754761.png](https://piccdn3.umiwi.com/img/201806/17/201806172034345354754761.png)

## 划重点

1.这种先把看得懂的信息，变成你看不懂，但是没有任何损失的中间信息的做法，是今天语音和图像处理的基础。

2.计算机在处理信息时，通常要把信息变成另一种形式才好处理，而那种形式，并非是人所熟悉的。

## 寻找知识伙伴

你可以寻找你的一位知识伙伴，一同探讨留给你的思考题。互相讨论、你来我往，可以让你们一同进步。

为了鼓励你表达，以及可以发起有碰撞的讨论，我们会在 *6月16日—6月22日（7日内）找到分享来信最多次的一位读者，送出一份《吴军的谷歌方法论》的兑换码，* 让你的知识伙伴，可以和你一起读一整年的来信。

你可以点击每篇内容右下角的“请朋友读”分享，现在就开始寻找一位你的知识伙伴吧！

![https://piccdn3.umiwi.com/img/201806/17/201806172034537384461218.jpg](https://piccdn3.umiwi.com/img/201806/17/201806172034537384461218.jpg)

---
