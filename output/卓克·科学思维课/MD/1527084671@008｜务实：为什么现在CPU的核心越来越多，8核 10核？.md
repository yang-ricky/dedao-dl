## 概念02：务实

用工程师的视角看世界，只解决迫在眉睫的问题，没有必要的就不去做。

# 008｜务实：为什么现在CPU的核心越来越多，8核10核？

现在的处理器不管是给台式机用还是给手机用，都是越来越往多核心这个方向发展，8核、10核。

> 处理器不是速度越高性能越好吗，怎么不见宣传工作速度了？

简单回答，就是工作频率提不上去了，为了继续增加性能只好弄成多核。

## 难以更高的频率

在民用市场里，1983年英特尔的 CPU 最高频率到了20Mhz，十七年后的2000年，速度达到了2000Mhz，频率上增加了100倍。但是，再过十七年到2017年，速度达到了4000Mhz，频率上只增加了1倍。尤其是最近10年，频率上可以说几乎没怎么增加。

只从数字看，大家都能明显感觉英特尔好像一头撞上了墙，很难再提高了。

CPU 的时钟频率，比如说把1秒钟分成100万份，每份一个刻度，加法需要用3个刻度，乘法用6个，除法用10个，但有的时候需要等待上一个结果出来，才能进行下一步计算，那么说不定中间有一长段的时间要等待，时间白白浪费掉了。

但总的来说，这个时钟频率还是越快越好。人们总是希望买到速度更快的 CPU，于是芯片设计企业就依照大家的需求把频率提升，但是，简单地提升以后发热也几乎成正比地提升，频率提升1倍，发热也提升1倍，而且提升频率的过程中还会出现工作不稳定，该是1的不是1，该是0的不是0，怎么办？

其实提升电压可以解决不稳定的问题，于是把电压往上提，但电压提升后，芯片发热还会继续提升，而且升得远比之前猛，它是按平方增加的，电压是原来2倍时，发热变成了从前的4倍。

现在的总体情况是，为了满足客户的需求，把速度提升了一倍，为了保证稳定，把电压提升了1倍，叠加后总的结果就是，发热是从前的8倍。原来的散热肯定不够用，加个风扇都不一定够。如果只是这样对付，一次升级勉强还可以，但明年客户需要频率再提升1倍，那就彻底没招了。

所以在提升频率的道路上，发热墙挡在前面，稍不注意就会被拦住。所以实际上我刚刚说的方法只是芯片厂最不愿意使用的策略。

 *真正应付发热暴增的强效方法是缩小芯片尺寸。 *

你要问其中道理，那还是免不了要涉及咱们上集提到的 MOSFET 的结构，但这又太细分太专业了，只能形象地理解一下：

> 如果把开关管想象成一道闸门，那么闸门越大，每次打开关上耗费的能量就越多，这些能量最终都会变成热的。如果闸门做得越小，每次开关耗费的能量就少多了。

所以缩小尺寸是解决办法，而且缩小尺寸还有另一个更加诱人的副作用：降低成本。

CPU 的核心就是一个大拇指指甲盖大小的东西，它是从一个大圆盘样子的硅片上切下来的，这个大圆盘和篮球筐差不多大，上面密密麻麻排着 CPU 核心。

![https://piccdn3.umiwi.com/img/201708/29/201708291732044108664536.jpg](https://piccdn3.umiwi.com/img/201708/29/201708291732044108664536.jpg)

硅晶圆

一张12寸直径的圆盘大约2万8千块钱，你在上面只划出4个指甲盖的格子也行，但不划算，因为每个 CPU 摊到的成本就是7000块钱。如果在上面划出400个指甲盖来，每个摊到的成本就是70块。所以降低芯片尺寸是一个一举三得的事情，既能提升频率，还能降低发热，也能降成本。这3方面的利益就猛推着半导体行业在短短几十年里把频率提升到接近4000Mhz的这个节点。

但是，从2007年开始，缩小尺寸这一招渐渐不管用了，形象地说就是这道闸门越变越小以后渐渐关不严了，即便我们把它设置成关闭，电流还是从它下面哗哗哗地经过，这就有热量产生，而且尺寸越小，单位面积发热越难控制。

虽然近10年，芯片厂商依旧尽最大努力把小闸门换用其他材料，或者改形状，让它关严实点，但漏过去的电流还是越来越多，从前大闸门时，100份能量95份都用在计算上了，现在小门帘，100份能量，只有45份用在计算上，剩下55份都泄漏出去了。而客户那边对性能的需求不减，这时候所有芯片厂都把注意力放在我节目开头说的，那些没有利用上的时钟刻度上了。

CPU 的时钟并没有100%用在计算上，还有用在等待上的，浪费掉的。

## 越来越多的核心

那么就让另一个同样结构的核心来帮忙，这就出现了双核心，而且为了它们俩承担的任务尽量平衡，工程师还要在设计计算机语言的时候，尽量考虑把能拆成多线程的任务拆出来。

> 比如给一幅图像上色这种活儿，一个核心干当然行，16个核心干也一样，图片分成16份，大家各自去上色，然后一拼就好了，所以这样典型的多线程任务，效率提升的倍数几乎和核心数量是一致的，但还是有相当多任务压根就没法拆成多任务，只能交给一个核心完成。

从前单个核心4GHz的频率能提供1个单位的性能，但是它不方便再提升频率了，我们走多核的道路，4个3GHz的核心，虽然频率不高，但性能平均是2个单位的性能，相当于单个核心8GHz的水平了。

这就是核心越来越多的原因。

不过从单核增加到双核是性能提升最明显的，再增加到4核，8核，甚至20核，带来的提升就越来越不明显，这还是因为指令中确实有相当多的压根没法转化为多线程。

当我们知道了这些就可以用工程师的视角回看各种手机、笔记本的文案宣传。也能体谅市场部工作人员的不容易了，明明是整个行业发展撞上了频率墙，不得不用多核，却不得不挖出一些卖点。

其实只要还是以硅为基础的材料，频率提升空间也很有限了，而且靠多核心提升性能，上升空间也有限。60年前诞生的那些技术基础其实已经被无数工程师发挥到极致了，想要看到下一个突破，需要期待的不是极致上的极致，而是另一套全新的技术基础。

## 今日思考题

有一些本来是技术上存在瓶颈，是不得以而为之的，可是在市场宣传中却用了另外一种手段掩盖了这种无奈，如果你想到了这样的例子，期待你在留言区分享你的观点。

> 卓克
> 
> 我是卓克，我们下期见。

![https://piccdn3.umiwi.com/img/201709/01/201709011923099091688204.jpg](https://piccdn3.umiwi.com/img/201709/01/201709011923099091688204.jpg)

## 划重点


单核心CPU的速度到达极限，在提升频率的路上撞到了“发热”这面墙，为了提高性能，工程师只好走多核心路线，但上升空间也有限。

---
