# 问答：到底什么叫“可计算”？

> 万维钢
> 
> 本周最主要的问题都是集中在“可计算性”上 —— 

> 读者 泼猴要撒野：
> 
> 文章读到最后感觉有一个计算之神在操纵一切世间万物，但是所有的一切都能计算么？似乎不是这样的。

> 读者 阿丁：
> 
> 新手难以理解“图灵停机问题”，总觉得有点神秘。万老师能解释一下吗？

> 万维钢

“可计算性”和“图灵停机问题”是计算机科学中的两个关键问题，我认为每个想要理解计算机的人都应该有所了解。今天的问答，咱们就专门说这两个问题。

## 1.什么叫“可计算”

我们知道，计算机思维能给人提供一个观察世界的视角，能让我们审视自己的世界观。因为有了计算机，我们现在可以问出下面这些大问题 ——

* 计算机能解决一切问题吗？

* 人脑是一台计算机吗？

* 我们生活的这个世界，有没有可能像《黑客帝国》电影那样，其实是一场计算机模拟呢？

我先说结论。科学家和哲学家的当前科学理解，对第 2 和第 3 个问题，还没有答案 —— 你只能猜想。但是对第一个问题，答案则是明确的否定：计算机不能解决一切问题。

那你可能会感到有点奇怪 —— 如果计算机不能解决一切问题，那不就是说计算机是有局限性的吗？那人脑和真实世界怎么还可能是计算机呢？其实这并不奇怪，因为人脑和真实世界也可能是有局限性的。计算机有局限性，不等于人脑就一定强于计算机，也不等于真实世界就不是计算机。

咱们先说说这里什么叫“解决问题”，也就是什么叫“可计算”。对计算机科学家来说，所谓可计算，就是给定输入，经过计算机的有限次操作，能得到一个确定的输出。“可计算”的意思不但是“可以算”，而且是“可以算出结果来”。

咱们把问题简化一点。我们考虑这么一种问题，它的答案要么是“是”，要么是“否”，而在逻辑上不存在模棱两可的中间状态。请问，所有这样的问题，都是计算机可以解决的吗？

答案是否定的。哪怕像是“是否”这种问题，都不全是可计算的。比如说，图灵停机问题，就是不可计算的。

## 2.图灵停机问题

让计算机执行一个“寻常的”程序，比如计算 1+2+3+…… 这么一直加到比如说 10000，只要计算机的内存足够大，只要你给的最后一个数是有限的，只要你愿意等待足够长的时间，它就终有算完、停机、输出一个结果的时候。

但是有些程序，却是永远都不会停机的。比如你可以让计算机一直循环执行下面这个命令 ——

  *在屏幕上打印“你好”*

那么你就会看到计算机不断地打印“你好”这两个字。你要是不主动杀死这个程序，它就不会停机，它陷入了“死锁”。“死锁”是程序员的噩梦，有时候写程序说不定哪里没设计好，程序一运行起来就陷入了死锁。

所以程序员就有一个美梦。有没有一个什么软件工具，能够直接看一眼我写的程序，就自动判断它会不会出现死锁呢？

这就是“图灵停机问题”。也就是说，有没有这样一个程序，它的输入是任何一段代码和这段代码的输入参数，而它的输出则是这段代码所代表的程序，在那个参数之下运行起来之后会不会自动停机 —— 如果判断会停机，就输出“1”；如果判断不会停机、会死锁，就输出“0”。

想要做到这一点，这个判断程序必须只读、而不能去执行那段代码 —— 因为如果执行，而那段代码又真的不停机的话，计算机就会陷入死锁，这个判断程序就不能输出“0”了。换句话说，这个判断程序得能像一个高水平程序员一样，看一眼你写的代码就知道其中有没有死锁。如果有这么一个判断程序，岂不就是一个绝佳的 debug 工具吗？

 **而图灵告诉你别做梦了，不存在的。**

在理论上就不可能存在那样的判断程序。这是一个不可计算的问题。

为什么呢？证明非常简单，反证法。以下为了行文方便我不得不使用一点编程语言 ——

我们假设存在这么一个判断程序，称为 Halt(p, I)。其中 p 是 Halt 要判断是否停机的代码，I 是程序 p 的输入。

也就是说，如果程序 p 运行输入值 I 的时候会停机，那么 Halt(p,I) = 1；否则，Halt(p,I) = 0.

好，那么我们构造下面这么一个新程序 [1]，称之为 Z：

 *Program (x)*

 *If Halt(x, x) then*

 *    永远循环*

 *Else 停机*

 *End.*

我解释一下。Z 的输入，是任意的一段字符串 x。x 可以是一段程序的代码，也可以是一段程序的输入。Z 的规则是，如果 Halt(x,x) 是 1，则 Z 就永远循环下去，不停机；如果 Halt(x,x) 是 0，则 Z 就停机。

那么请问，像这样的一个程序 Z，如果把它的代码自身，作为它的输入，会怎样呢？它会停机吗？

如果会停机，那就意味着 Halt(Z,Z) = 1，对吧？可是你带入 Z 的规则之中，这时候 Z 就应该不停机。反过来说，如果 Z 不会停机，那么 Halt(Z,Z) = 0，带入规则之后 Z 又会停机！悖论！

所以 Halt 这样的程序，根本就不可能存在。证明完毕。

这个证明是否让你想起了我们讲逻辑思维的时候说过的“理发师悖论”。Z 就是那个“只给不给自己理发的人理发的理发师”。这个悖论的关键点就在于，一段代码，既是可执行的程序，又可以作为输入的字符串。所以我理解，这个矛盾的根源在于，写代码和判断代码，都是能用语言描述的行为。

## 3.不可计算意味着什么

现在图灵给了一个例子，说明世界上有些问题是计算机无法解决的。计算机无法判断任何一段代码是否会停机。这说明哪怕所有问题都能用数字化描写，计算机也解决不了所有问题。

这有什么意义呢？

 *这意味着总有一些事情，你只能慢慢等着它发生，而不能事先知道它的结果。* 这意味着程序员必须把程序运行一下才知道其中有没有 bug。这意味着理论是有限的，必须得实践才行。

 *这还意味着，世界上有些事情，你只能看着它发生，而无法解释它为什么会发生。* 这是因为你甚至都无法预测它会不会停下来，又何谈什么解释呢？

 *那也就意味着，我们不可能完全理解真实世界。* 我们头脑里的只是世界的模型 —— 而世界的模型不能代表真实世界。世界上总有一些事情，是你没有办法用什么简化的模型预测的，你只能看着它发生才知道结果。这是否使你想起了我们第一季讲过的“不可约化的复杂” [2]，和哥德尔不完备性定理……其实它们说的都是理性世界的局限性。

 *而如果你是一个善于感慨人生的人，这也就意味着，哪怕你再聪明，人生也是值得过的。总有些事儿你想不到，你总得经历才知道。*

好，下面我来回答你可能会问到的四个问题。

 **第一，这里的“不可计算”，是因为不确定性吗？**

—— 不是。图灵停机问题完全可以没有任何不确定性。哪怕一切都是确定的，没有任何随机变量，最后结果仍然不可知。不可知不等于不确定。我十岁生日那天确定、一定、肯定吃过东西，可是我完全不记得吃的是什么 —— 这件事不可知，但是并非不确定。

在一个完全确定的世界里，也有计算机解决不了的问题。

 **第二，男女感情问题，是不可计算的吗？**

—— 好多人问我这个问题。我不是感情问题专家，但是我非常肯定地相信，感情问题是可计算的。因为人的情绪容易多变，感情问题有时候不好计算，但不等于不可计算。计算机科学家说的“可计算”是个严格的定义：只要图灵机能在有限步能算出结果来，就是可计算的。

事实上用计算机程序模拟一个人的脾气非常容易。至今没有任何一项属于人的特性，被证明是计算机在理论上也不能推演的。

 **第三，你说的都是图灵机，是吧？**

—— 图灵机并不是一种非常特殊的计算机，它就是我们寻常用的这种计算机。只要满足 1）数字化信息 2）数学式的、有限步的算法； 3）能停机，就是图灵机。

图灵机只能处理有理数，这是一个重大限制。但是没有任何证据表明，真实世界不仅仅是由有理数组成的。

 **第四，可是根据量子力学，我们知道真实世界里是有不确定性的，图灵机能模拟不确定性吗？**

—— 量子力学的哥本哈根解释认为量子随机性是真正的随机性。我们知道数学方程的解永远都是确定的，所以数学方程无法解释量子现象，那么既然如此，图灵机是基于数学的，所以图灵机就无法代替量子世界。

但是，图灵机可以模拟出一些假的随机数来，让你感觉就好像是真的随机一样。我们无法判断在真实世界里遇到的所谓随机现象，到底是不是外星人给我们模拟出来的假随机！

总而言之 ——

 *有没有一件事是人一定能做，而计算机一定不能做的？目前认为没有。*

 *有没有一件事是真实世界里发生了，而计算机一定不能模拟的？目前认为没有。*

 *……然而计算机仍然不能解决所有问题。这个世界就是这么有意思。*

![https://piccdn3.umiwi.com/img/201905/17/201905172242115802735189.jpg](https://piccdn3.umiwi.com/img/201905/17/201905172242115802735189.jpg)

---
